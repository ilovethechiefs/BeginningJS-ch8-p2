<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Chapter 8: Example 4</title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <script type="text/javascript" src="/home/ilovethechiefs/Desktop/js/frameworks/jquery-1.11.3.js"></script>
  <script type="text/javascript">
    var detailsWindow;
    var shoppingCartList = "";
    var shoppingCartArray = [0,0];

    function shoppingCartFunction(bookIndex) {
      switch(bookIndex) {
        case 0:
          shoppingCartArray[0] += 1;
          break;
        case 1:
          shoppingCartArray[1] += 1;
          break;
        case 2:
          shoppingCartArray[0] -= 1;
          break;
        case 3:
          shoppingCartArray[1] -= 1;
          break;
        default:
          alert("shoppingCartFunction switch statement failed.");
      }

      shoppingCartList = "";

      if (shoppingCartArray[0] > 0) {
        shoppingCartList += "Professional Ajax, 2nd Edition - " + shoppingCartArray[0] + " copies";
      }
      if (shoppingCartArray[1] > 0) {
        shoppingCartList += "Professional JavaScript, 2nd Edition - " + shoppingCartArray[1] + " copies";
      }

    }

    function showDetails(bookURL)
    {
      detailsWindow = window.open(bookURL, "bookDetails", "width=400", "height=550");
      detailsWindow.focus();
    }

    function ajaxAddToCart()
    {
      shoppingCartFunction(0);
      var shoppingCartWindow = window.open('shoppingCart.htm', "shoppingCart",
      "width=550,height=550");
      shoppingCartWindow.onload = function() {
        shoppingCartWindow.document.getElementById("shoppingCartDetails").innerHTML = shoppingCartList;
      }

      detailsWindow.close();
      shoppingCartWindow.focus();
    }

    function javascriptAddToCart()
    {
      shoppingCartFunction(1);
      var shoppingCartWindow = window.open('shoppingCart.htm', "shoppingCart",
      "width=550,height=550");
      shoppingCartWindow.onload = function() {
        shoppingCartWindow.document.getElementById("shoppingCartDetails").innerHTML = shoppingCartList;
      }

      detailsWindow.close();
      shoppingCartWindow.focus();
    }

    function viewShoppingCart()
    {
      var shoppingCartWindow = window.open('shoppingCart.htm', "shoppingCart",
      "width=550,height=550");
      shoppingCartWindow.onload = function() {
        shoppingCartWindow.document.getElementById("shoppingCartDetails").innerHTML = shoppingCartList;
      }
      shoppingCartWindow.focus();
    }
  </script>
</head>

<body>
  <div id="upperRight">
    <button type="button" onclick="viewShoppingCart()">View Shopping Cart</button>
  </div>
  <h2>Online Book Buyer</h2>
  <p>
    Click any of the images below for more details
  </p>
  <h4>Professional Ajax</h4>
  <p>
    <img src="pro_ajax.jpg" alt="Professional Ajax, 2nd Edition" border="0"
      onclick="showDetails('pro_ajax_details.htm')" />
  </p>
  <h4>Professional JavaScript for Web Developers</h4>
  <p>
    <img src="pro_js.jpg" alt="Professional JavaScript, 2nd Edition"
    border="0" onclick="showDetails('pro_js_details.htm')" />
  </p>
  </body>
</html>
